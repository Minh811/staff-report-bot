{"file_contents":{"README.md":{"content":"# staff-report-bot\nStaff Report Bot là bot Discord tự động tổng kết hoạt động của nhân viên (staff) theo ngày. Bot cho phép mỗi staff nhập số lượng công việc (help) trong ngày bằng lệnh slash /addhelp, sau đó tự động tổng hợp báo cáo lúc 0h mỗi ngày và gửi kết quả vào một kênh tổng kết cố định.\n","size_bytes":371},"index.js":{"content":"// Load dotenv\nimport 'dotenv/config';\n\n// Import Discord.js\nimport { Client, GatewayIntentBits } from 'discord.js';\n\n// Khởi tạo client duy nhất\nconst client = new Client({\n  intents: [\n    GatewayIntentBits.Guilds,\n    GatewayIntentBits.GuildMessages,\n    GatewayIntentBits.MessageContent\n  ]\n});\n\n// Biến môi trường\nconst prefix = process.env.PREFIX;\nconst ownerId = process.env.OWNER_ID;\nconst token = process.env.DISCORD_TOKEN;\nconst reportChannelId = process.env.REPORT_CHANNEL_ID;\n\n// Event khi bot đăng nhập thành công\nclient.once('ready', () => {\n  console.log(`✅ Bot đã đăng nhập: ${client.user.tag}`);\n});\n\n// Event khi có tin nhắn\nclient.on('messageCreate', async message => {\n  // Bỏ qua tin nhắn bot hoặc không có prefix\n  if (!message.content.startsWith(prefix) || message.author.bot) return;\n\n  const args = message.content.slice(prefix.length).trim().split(/ +/);\n  const command = args.shift().toLowerCase();\n\n  // Lệnh ping cơ bản\n  if (command === 'ping') {\n    await message.channel.send('Pong!');\n  }\n\n  // Lệnh report nhân viên (staff-report)\n  if (command === 'report') {\n    if (!args[0]) {\n      return message.reply('Vui lòng tag người bạn muốn report!');\n    }\n\n    const member = message.mentions.members.first();\n    if (!member) return message.reply('Không tìm thấy thành viên!');\n\n    const reason = args.slice(1).join(' ') || 'Không có lý do cụ thể';\n\n    // Gửi report vào kênh report\n    const reportChannel = await client.channels.fetch(reportChannelId);\n    if (!reportChannel) return message.reply('Không tìm thấy kênh report!');\n\n    reportChannel.send(\n      `⚠️ **Staff Report**\\n` +\n      `Người report: ${message.author.tag}\\n` +\n      `Người bị report: ${member.user.tag}\\n` +\n      `Lý do: ${reason}`\n    );\n\n    message.reply(`Đã gửi report về ${member.user.tag}`);\n  }\n});\n\n// Login bot (chỉ 1 lần)\nclient.login(token);\n","size_bytes":1966}},"version":2}